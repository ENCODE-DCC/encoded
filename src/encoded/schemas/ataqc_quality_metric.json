{
    "title": "ATAC-seq quality metric",
    "description": "Schema for reporting ATAC-seq quality metrics",
    "id": "/profiles/ataqc_quality_metric.json",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "type": "object",
    "required": ["step_run","quality_metric_of", "award", "lab"],
    "additionalProperties": false,
    "identifyingProperties": ["uuid"],
    "mixinProperties": [
        { "$ref": "mixins.json#/schema_version" },
        { "$ref": "quality_metric.json#/properties" },
        { "$ref": "mixins.json#/uuid" },
        { "$ref": "mixins.json#/submitted"},
        { "$ref": "mixins.json#/aliases"},
        { "$ref": "mixins.json#/attribution" },
        { "$ref": "mixins.json#/standard_status"},
        { "$ref": "mixins.json#/assay" }
   ],
    "properties": {
        "schema_version": {
            "default": "1"
        },
        "run_type": {
            "title": "Run type",
            "type": "string",
            "enum": [
                "single-ended",
                "paired-ended"
            ]
        },
        "read_length": {
            "title": "Read length",
            "type": "integer",
            "minimum": 0
        },
        "sequencer_reads": {
            "title": "Sequencer reads",
            "description": "Nuumber of reads from sequencer",
            "type": "integer",
            "minimum": 0
        },
        "aligned_reads": {
            "title": "Aligned reads",
            "description": "Nuumber of reads successfully aligned",
            "type": "integer",
            "minimum": 0
        },
        "filtered_reads": {
            "title": "Quality filtered reads",
            "description": "Nuumber of reads after filtering for mapping quality",
            "type": "integer",
            "minimum": 0
        },
        "filtered_reads_percentage": {
            "title": "Percentage of quality filtered reads",
            "description": "Percentage of reads with mapping quality > q30 (out of total)",
            "type": "number",
            "minimum": 0,
            "maximum": 1
        },
        "duplicated_reads": {
            "title": "Duplicate reads",
            "type": "integer",
            "minimum": 0
        },
        "duplicated_reads_percentage": {
            "title": "Percentage of duplicated reads",
            "type": "number",
            "minimum": 0,
            "maximum": 1
        },
        "dedup_reads": {
            "title": "Deduplicated reads",
            "description": "Nuumber of reads after removing duplicate reads",
            "type": "integer",
            "minimum": 0
        },
        "mitochondrial_reads": {
            "title": "Mitochondrial reads",
            "type": "integer",
            "minimum": 0
        },
        "mitochondrial_reads_percentage": {
            "title": "Percentage of mitochondrial reads",
            "description": "Percentage of mitochondrial reads (out of total)",
            "type": "number",
            "minimum": 0,
            "maximum": 1
        },
        "dup_mito_reads": {
            "title": "Duplicated mitochondrial reads",
            "description": "Duplicated mitochondrial reads (out of all duplicated reads)",
            "type": "integer",
            "minimum": 0
        },
        "dup_mito_reads_percentage": {
            "title": "Percentage of duplicated mitochondrial reads",
            "description": "Percentage of duplicated mitochondrial reads (out of all duplicated reads)",
            "type": "number",
            "minimum": 0,
            "maximum": 1
        },
        "final_reads": {
            "title": "Final reads",
            "description": "Final reads are high quality (> q30), non-duplicated, non-mitochondrial reads.",
            "type": "integer",
            "minimum": 0
        },
        "final_reads_percentage": {
            "title": "Percentage of final reads",
            "description": "Final reads are high quality (> q30), non-duplicated, non-mitochondrial reads.",
            "type": "number",
            "minimum": 0,
            "maximum": 1
        },
        "NRF": {
            "title": "Non-redundant fraction",
            "type": "number",
            "description": "Non redundant fraction (indicates library complexity).  Number of distinct unique mapping reads (i.e. after removing duplicates) / Total number of reads",
            "minimum": 0,
            "maximum": 1
        },
        "NRF_test": {
            "title": "NRF quality check",
            "type": "string",
            "description": "NRF test result for this experiment",
            "pattern": "^((OK)|(out of range \\[(-?[\\d.]+|-inf), (-?[\\d.]+|inf)\\]))$"
        },
        "PBC1": {
            "title": "PCR bottlenecking coefficient 1",
            "type": "number",
            "description": "PCR Bottlenecking coefficient 1 = M1/M_DISTINCT where M1: number of genomic locations where exactly one read maps uniquely, M_DISTINCT: number of distinct genomic locations to which some read maps uniquely",
            "minimum": 0,
            "maximum": 1
        },
        "PBC1_test": {
            "title": "PBC1 quality check",
            "type": "string",
            "description": "PBC1 test result for this experiment",
            "pattern": "^((OK)|(out of range \\[(-?[\\d.]+|-inf), (-?[\\d.]+|inf)\\]))$"
        },
        "PBC2": {
            "title": "PCR bottlenecking coefficient 2",
            "type": ["number", "string"],
            "minimum":0,
            "pattern": "^Infinity$",
            "description": "PCR Bottlenecking coefficient 2 (indicates library complexity) = M1/M2 where M1: number of genomic locations where only one read maps uniquely and M2: number of genomic locations where 2 reads map uniquely"
        },
        "PBC2_test": {
            "title": "PBC2 quality check",
            "type": "string",
            "description": "PBC2 test result for this experiment",
            "pattern": "^((OK)|(out of range \\[(-?[\\d.]+|-inf), (-?[\\d.]+|inf)\\]))$"
        },
        "picard_est_library_size": {
            "title": "Picard estimated library size",
            "type": "integer",
            "minimum":0
        },
        "NFR_reads_fraction": {
            "title": "Fraction of NFR reads",
            "description": "Fraction of reads in nucleosome free region (NFR)",
            "type": "number",
            "minimum":0
        },
        "NFR_fraction_test": {
            "title": "Quality check of NFR reads fraction",
            "type": "string",
            "description": "Quality check on fraction of reads in NFR for this experiment",
            "pattern": "^((OK)|(out of range \\[(-?[\\d.]+|-inf), (-?[\\d.]+|inf)\\]))$"
        },
        "NFR_mono_reads_ratio": {
            "title": "Ratio of NFR reads to Mono-Nuc reads",
            "type": "number",
            "minimum": 0
        },
        "NFR_mono_ratio_test": {
            "title": "Quality check of NFR and Mono-Nuc reads ratio",
            "type": "string",
            "description": "Quality check on the ratio of NFR reads to Mono-Nuc reads",
            "pattern": "^((OK)|(out of range \\[(-?[\\d.]+|-inf), (-?[\\d.]+|inf)\\]))$"
        },
        "NFR_peak_presence": {
            "title": "Presence of NFR peak",
            "type": "string",
            "pattern": "^((OK)|(Cannot find element in range \\[(-?[\\d.]+|-inf), (-?[\\d.]+|inf)\\]))$"
        },
        "Mono-Nuc_peak_presence": {
            "title": "Presence of Mono-Nuc peak",
            "type": "string",
            "pattern": "^((OK)|(Cannot find element in range \\[(-?[\\d.]+|-inf), (-?[\\d.]+|inf)\\]))$"
        },
        "Di-Nuc_peak_presence": {
            "title": "Presence of Di-Nuc peak",
            "type": "string",
            "pattern": "^((OK)|(Cannot find element in range \\[(-?[\\d.]+|-inf), (-?[\\d.]+|inf)\\]))$"
        },
        "naive_overlap_peaks": {
            "title": "Naive overlap peaks",
            "description": "Number of naive overlap peaks",
            "type": "integer",
            "minimum":0
        },
        "naive_overlap_peak_test": {
            "title": "Quality check of naive overlap peaks",
            "type": "string",
            "description": "Naive overlap paek test result for this experiment",
            "pattern": "^((OK)|(out of range \\[(-?[\\d.]+|-inf), (-?[\\d.]+|inf)\\]))$"
        },
        "idr_peaks": {
            "title": "IDR peaks",
            "type": "integer",
            "minimum":0
        },
        "idr_peak_test": {
            "title": "Quality check of IDR peak",
            "type": "string",
            "description": "IDR peak test result for this experiment",
            "pattern": "^((OK)|(out of range \\[(-?[\\d.]+|-inf), (-?[\\d.]+|inf)\\]))$"
        },
        "idr_cutoff":{
            "title": "IDR cutoff",
            "type": "number",
            "minimum": 0,
            "maximum": 1
        },
        "naive_peak_min_size": {
            "title": "Minimum naive peak size",
            "type": "number",
            "minimum": 0
        },
        "naive_peak_25_percentile_size": {
            "title": "Naive peak size at 25 percentile",
            "type": "number",
            "minimum": 0
        },
        "naive_peak_50_percentile_size": {
            "title": "Median naive peak size",
            "type": "number",
            "minimum": 0
        },
        "naive_peak_75_percentile_size": {
            "title": "Naive peak size at 75 percentile",
            "type": "number",
            "minimum": 0
        },
        "naive_peak_max_size": {
            "title": "Maximum naive peak size",
            "type": "number",
            "minimum": 0
        },
        "naive_peak_mean_size": {
            "title": "Average naive peak size",
            "type": "number",
            "minimum": 0
        },
        "idr_peak_min_size": {
            "title": "Minimum IDR peak size",
            "type": "number",
            "minimum": 0
        },
        "idr_peak_25_percentile_size": {
            "title": "IDR peak size at 25 percentile",
            "type": "number",
            "minimum": 0
        },
        "idr_peak_50_percentile_size": {
            "title": "Median IDR peak size",
            "type": "number",
            "minimum": 0
        },
        "idr_peak_75_percentile_size": {
            "title": "IDR peak size at 75 percentile",
            "type": "number",
            "minimum": 0
        },
        "idr_peak_max_size": {
            "title": "Maximum IDR peak size",
            "type": "number",
            "minimum": 0
        },
        "idr_peak_mean_size": {
            "title": "Average IDR peak size",
            "type": "number",
            "minimum": 0
        },
        "TSS_enrichment": {
            "title": "TSS enrichement",
            "type": "number"
        },
        "DHS_reads": {
            "title": "DHS reads",
            "description": "Number of reads in universal DHS regions",
            "type": "integer",
            "minimum": 0
        },
        "DHS_reads_percentage": {
            "title": "Fraction of DHS reads",
            "description": "Fraction of reads in universal DHS regions",
            "type": "number",
            "minimum": 0,
            "maximum": 1
        },
        "blacklist_reads": {
            "title": "Blacklist reads",
            "description": "Number of reads in blacklist regions",
            "type": "integer",
            "minimum": 0
        },
        "blacklist_reads_percentage": {
            "title": "Fraction of blacklist reads",
            "type": "number",
            "minimum": 0,
            "maximum": 1
        },
        "promoter_reads": {
            "title": "Promoter reads",
            "description": "Number of reads in promoter regions",
            "type": "integer",
            "minimum": 0
        },
        "promoter_reads_percentage": {
            "title": "Fraction of promoter reads",
            "type": "number",
            "minimum": 0,
            "maximum": 1
        },
        "enhancer_reads": {
            "title": "Enhancer reads",
            "description": "Number of reads in enhancer regions",
            "type": "integer",
            "minimum": 0
        },
        "enhancer_reads_percentage": {
            "title": "Fraction of enhancer reads",
            "type": "number",
            "minimum": 0,
            "maximum": 1
        },
        "called_peak_reads": {
            "title": "Called peak reads",
            "description": "Number of reads in called peak regions",
            "type": "integer",
            "minimum": 0
        },
        "called_peak_reads_percentage": {
            "title": "Fraction of called peak reads",
            "type": "number",
            "minimum": 0,
            "maximum": 1
        },
        "fragment_length_distribution_plot": {
            "title": "Fragment length distribution plot",
            "type": "object",
            "additionalProperties": false,
            "attachment": true,
            "formInput": "file",
            "properties": {
                "download": {
                    "title": "File Name",
                    "type": "string"
                },
                "href": {
                    "comment": "Internal webapp URL for document file",
                    "type": "string"
                },
                "type": {
                    "title": "MIME type",
                    "type": "string",
                    "enum": [
                        "application/pdf"
                    ]
                },
                "size": {
                    "title": "File size",
                    "type": "integer",
                    "minimum": 0
                },
                "md5sum": {
                    "format": "md5sum",
                    "type": "string",
                    "title": "MD5sum"
                }
            }
        },
        "TSS_enrichment_plot": {
            "title": "TSS enrichement plot",
            "type": "object",
            "additionalProperties": false,
            "attachment": true,
            "formInput": "file",
            "properties": {
                "download": {
                    "title": "File Name",
                    "type": "string"
                },
                "href": {
                    "comment": "Internal webapp URL for document file",
                    "type": "string"
                },
                "type": {
                    "title": "MIME type",
                    "type": "string",
                    "enum": [
                        "application/pdf"
                    ]
                },
                "size": {
                    "title": "File size",
                    "type": "integer",
                    "minimum": 0
                },
                "md5sum": {
                    "format": "md5sum",
                    "type": "string",
                    "title": "MD5sum"
                }
            }
        }
    },
    "facets": {
        "assay_term_name": {
            "title": "Assay name"
        },
        "status": {
            "title": "Status"
        }
    },
    "changelog": "/profiles/changelogs/ataqc_quality_metric.md"
}
