{ 
    "title": "Analysis step",
    "description": "Schema for submitting a computational analysis steps as a subobject of pipeline that transforms input files to output files.",
    "id": "/profiles/analysis_step.json",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "type": "object",
    "required": ["name", "title", "analysis_step_types", "input_file_types"],
    "additionalProperties": false,
    "identifyingProperties": ["uuid", "aliases", "name"],
    "mixinProperties": [
        { "$ref": "mixins.json#/schema_version" },
        { "$ref": "mixins.json#/aliases" },
        { "$ref": "mixins.json#/uuid" },
        { "$ref": "mixins.json#/standard_status" },
        { "$ref": "mixins.json#/submitted"},
        { "$ref": "mixins.json#/documents" },
        { "$ref": "mixins.json#/notes"}
    ],
    "properties": {
        "schema_version": {
            "default": "4"
        },
        "name": {
            "title": "Name",
            "description": "Unique name of the analysis step",
            "comment": "Unique for each parent analysis_step, using a naming system where the pipeline, software used, the purpose and the version of the step is described: rampage-grit-peak-calling-step-v-1",
            "type": "string",
            "pattern": "^[a-z0-9\\-\\_]+$",
            "uniqueKey": true
        },
        "title": {
            "title": "Title",
            "description": "The preferred viewable name of the analysis step, likely the same as the name.",
            "type": "string"
        },
        "analysis_step_types": {
            "title": "Types",
             "description": "The classification of the software",
             "type": "array",
             "uniqueItems": true,
             "items": {
                 "title": "Type",
                 "type": "string",
                 "enum": [
                     "pooling",
                     "depth normalization",
                     "signal normalization",
                     "genome indexing",
                     "genome segmentation",
                     "fastq concatenation",
                     "filtering",
                     "file format conversion",
                     "QA calculation",
                     "peak calling",
                     "IDR",
                     "alignment",
                     "replicate concordance",
                     "ranking",
                     "signal generation",
                     "subsampling",
                     "quantification",
                     "transcript identification",
                     "open chromatin region identification",
                     "transcriptome assembly",
                     "variant annotation",
                     "read trimming",
                     "interaction calling",
                     "topologically associated domain identification",
                     "chromatin loop identification"
                 ]
             }
        },
        "input_file_types": {
            "title": "Input file types",
            "description": "The file types used as input for the analysis.",
            "type": "array",
            "uniqueItems": true,
            "items": {
                "title": "Input file type",
                "description": "A file type used as input for the analysis.",
                "type": "string",
                "enum": [
                    "idat green channel",
                    "idat red channel",
                    "reads",
                    "raw data",
                    "intensity values",
                    "reporter code counts",
                    "alignments",
                    "unfiltered alignments",
                    "transcriptome alignments",
                    "minus strand signal of all reads",
                    "plus strand signal of all reads",
                    "signal of all reads",
                    "normalized signal of all reads",
                    "raw minus strand signal",
                    "raw plus strand signal",
                    "raw signal",
                    "raw normalized signal",
                    "read-depth normalized signal",
                    "control normalized signal",
                    "minus strand signal of unique reads",
                    "plus strand signal of unique reads",
                    "signal of unique reads",
                    "microRNA quantifications",
                    "exon quantifications",
                    "gene quantifications",
                    "transcript quantifications",
                    "library fraction",
                    "methylation state at CpG",
                    "methylation state at CHG",
                    "methylation state at CHH",
                    "enrichment",
                    "replication timing profile",
                    "hotspots",
                    "long range chromatin interactions",
                    "chromatin interactions",
                    "peaks",
                    "RNA-binding protein associated mRNAs",           
                    "splice junctions",
                    "transcription start sites",
                    "predicted enhancers",
                    "predicted forebrain enhancers",
                    "predicted heart enhancers",
                    "predicted wholebrain enhancers",
                    "candidate regulatory elements",
                    "genome reference",
                    "genome index",
                    "female genome reference",
                    "female genome index",
                    "male genome reference",
                    "male genome index",
                    "spike-in sequence",
                    "reference genes",
                    "reference variants",
                    "variant calls",
                    "filtered SNPs",
                    "filtered indels",
                    "blacklisted regions",
                    "predicted transcription start sites",
                    "optimal idr thresholded peaks",
                    "conservative idr thresholded peaks",
                    "pseudoreplicated idr thresholded peaks",
                    "signal p-value",
                    "fold change over control",
                    "replicated peaks",
                    "bed",
                    "open chromatin regions",
                    "filtered peaks",
                    "filtered regions"
                ]
            }
        },
        "output_file_types": {
            "title": "Output file types",
            "description": "The file types generated as output for the analysis.",
            "type": "array",
            "uniqueItems": true,
            "items": {
                "title": "Output file type",
                "description": "A file type generated as output for the analysis.",
                "type": "string",
                "enum": [
                    "idat green channel",
                    "idat red channel",
                    "reads",
                    "intensity values",
                    "reporter code counts",
                    "unfiltered alignments",
                    "alignments",
                    "transcriptome alignments",
                    "minus strand signal of all reads",
                    "plus strand signal of all reads",
                    "signal of all reads",
                    "normalized signal of all reads",
                    "raw minus strand signal",
                    "raw plus strand signal",
                    "raw signal",
                    "raw normalized signal",
                    "read-depth normalized signal",
                    "control normalized signal",
                    "minus strand signal of unique reads",
                    "plus strand signal of unique reads",
                    "signal of unique reads",
                    "exon quantifications",
                    "gene quantifications",
                    "transcript quantifications",
                    "microRNA quantifications",
                    "library fraction",
                    "methylation state at CpG",
                    "methylation state at CHG",
                    "methylation state at CHH",
                    "enrichment",
                    "replication timing profile",
                    "hotspots",
                    "long range chromatin interactions",
                    "chromatin interactions",
                    "topologically associated domains",
                    "open chromatin regions",
                    "peaks",
                    "RNA-binding protein associated mRNAs",           
                    "splice junctions",
                    "transcription start sites",
                    "predicted enhancers",
                    "predicted forebrain enhancers",
                    "predicted heart enhancers",
                    "predicted wholebrain enhancers",
                    "candidate regulatory elements",
                    "genome reference",
                    "genome index",
                    "female genome reference",
                    "female genome index",
                    "male genome reference",
                    "male genome index",
                    "spike-in sequence",
                    "reference genes",
                    "reference variants",
                    "variant calls",
                    "filtered SNPs",
                    "filtered indels",
                    "blacklisted regions",
                    "predicted transcription start sites",
                    "optimal idr thresholded peaks",
                    "conservative idr thresholded peaks",
                    "pseudoreplicated idr thresholded peaks",
                    "signal p-value",
                    "fold change over control",
                    "replicated peaks",
                    "bigBed",
                    "filtered peaks",
                    "filtered regions"
                ]
            }
        },
        "qa_stats_generated": {
            "title": "QA statistics",
            "description": "The QA statistics generated by the analysis.",
            "type": "array",
            "uniqueItems": true,
            "items": {
                "title": "QA statistic",
                "description": "A QA statistic generated by the analysis.",
                "type": "string"
            }
        },
        "parents": {
            "title": "Parents",
            "description": "The precursor steps.",
            "uniqueItems": true,
            "type": "array",
            "items": {
                "description": "A precusor step.",
                "comment": "See analysis_step.json for available identifiers.",
                "type": "string",
                "linkTo": "AnalysisStep"
            }
        }
    }
}
