{ 
    "title": "Analysis step",
    "description": "Schema for submitting a computational analysis steps as a subobject of pipeline that transforms input files to output files.",
    "id": "/profiles/analysis_step.json",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "type": "object",
    "required": ["name", "title", "analysis_step_types", "input_file_types"],
    "additionalProperties": false,
    "identifyingProperties": ["uuid", "aliases", "name"],
    "mixinProperties": [
        { "$ref": "mixins.json#/schema_version" },
        { "$ref": "mixins.json#/aliases" },
        { "$ref": "mixins.json#/uuid" },
        { "$ref": "mixins.json#/standard_status" },
        { "$ref": "mixins.json#/submitted"},
        { "$ref": "mixins.json#/documents" },
        { "$ref": "mixins.json#/notes"}
    ],
    "properties": {
        "schema_version": {
            "default": "5"
        },
        "name": {
            "title": "Name",
            "description": "Unique name of the analysis step",
            "comment": "Unique for each parent analysis_step, using a naming system where the pipeline, software used, the purpose and the version of the step is described: rampage-grit-peak-calling-step-v-1",
            "type": "string",
            "pattern": "^[a-z0-9\\-\\_]+$",
            "uniqueKey": true
        },
        "title": {
            "title": "Title",
            "description": "The preferred viewable name of the analysis step, likely the same as the name.",
            "type": "string"
        },
        "analysis_step_types": {
            "title": "Types",
             "description": "The classification of the software",
             "type": "array",
             "uniqueItems": true,
             "items": {
                 "title": "Type",
                 "type": "string",
                 "enum": [
                     "pooling",
                     "depth normalization",
                     "signal normalization",
                     "genome indexing",
                     "genome segmentation",
                     "fastq concatenation",
                     "filtering",
                     "file format conversion",
                     "QA calculation",
                     "peak calling",
                     "IDR",
                     "unreplicated IDR",
                     "partition concordance",
                     "alignment",
                     "replicate concordance",
                     "ranking",
                     "signal generation",
                     "subsampling",
                     "quantification",
                     "transcript identification",
                     "open chromatin region identification",
                     "classification",
                     "transcriptome assembly",
                     "variant annotation",
                     "read trimming",
                     "interaction calling",
                     "topologically associated domain identification",
                     "chromatin loop identification"
                 ]
             }
        },
        "input_file_types": {
            "title": "Input file types",
            "description": "The file types used as input for the analysis.",
            "type": "array",
            "uniqueItems": true,
            "items": {
                "title": "Input file type",
                "description": "A file type used as input for the analysis.",
                "type": "string",
                "enum": [
                    "bed",
                    "raw data",
                    "predicted transcription start sites",
                    "reference genes",
                    
                    "idat green channel",
                    "idat red channel",
                    "reads",
                    "intensity values",
                    "reporter code counts",
                    "alignments",
                    "unfiltered alignments",
                    "transcriptome alignments",
                    "maternal haplotype mapping",
                    "paternal haplotype mapping",
                    "phased mapping",
                    "minus strand signal of all reads",
                    "plus strand signal of all reads",
                    "signal of all reads",
                    "normalized signal of all reads",
                    "raw minus strand signal",
                    "raw plus strand signal",
                    "raw signal",
                    "raw normalized signal",
                    "read-depth normalized signal",
                    "control normalized signal",
                    "minus strand signal of unique reads",
                    "plus strand signal of unique reads",
                    "signal of unique reads",
                    "signal p-value",
                    "fold change over control",
                    "exon quantifications",
                    "gene quantifications",
                    "microRNA quantifications",
                    "transcript quantifications",
                    "library fraction",
                    "methylation state at CpG",
                    "methylation state at CHG",
                    "methylation state at CHH",
                    "enrichment",
                    "replication timing profile",
                    "relative replication signal",
                    "maternal variant calls",
                    "paternal variant calls",
                    "phased variant calls",
                    "variant calls",
                    "filtered SNPs",
                    "filtered indels",
                    "motif model",
                    "hotspots",
                    "long range chromatin interactions",
                    "chromatin interactions",
                    "topologically associated domains",
                    "nested topologically associated domains",
                    "genome compartments",
                    "open chromatin regions",
                    "filtered peaks",
                    "filtered regions",
                    "DHS peaks",
                    "peaks",
                    "replicated peaks",
                    "RNA-binding protein associated mRNAs",
                    "splice junctions",
                    "transcription start sites",
                    "predicted enhancers",
                    "candidate enhancers",
                    "candidate promoters",
                    "predicted forebrain enhancers",
                    "predicted heart enhancers",
                    "predicted whole brain enhancers",
                    "candidate regulatory elements",
                    "representative dnase hypersensitivity sites",
                    "sequence alignability",
                    "genome reference",
                    "transcriptome reference",
                    "transcriptome index",
                    "tRNA reference",
                    "miRNA reference",
                    "snRNA reference",
                    "rRNA reference",
                    "TSS reference",
                    "reference variants",
                    "genome index",
                    "female genome reference",
                    "female genome index",
                    "male genome reference",
                    "male genome index",
                    "spike-in sequence",
                    "optimal idr thresholded peaks",
                    "conservative idr thresholded peaks",
                    "pseudoreplicated idr thresholded peaks",
                    "stable peaks",
                    "enhancer validation",
                    "semi-automated genome annotation",
                    "blacklisted regions",
                    "mitochondria blacklisted regions"
                ]
            }
        },
        "output_file_types": {
            "title": "Output file types",
            "description": "The file types generated as output for the analysis.",
            "type": "array",
            "uniqueItems": true,
            "items": {
                "title": "Output file type",
                "description": "A file type generated as output for the analysis.",
                "type": "string",
                "enum": [
                    "bigBed",
                    "predicted transcription start sites",
                    "reference genes",
                    
                    "idat green channel",
                    "idat red channel",
                    "reads",
                    "intensity values",
                    "reporter code counts",
                    "alignments",
                    "unfiltered alignments",
                    "transcriptome alignments",
                    "maternal haplotype mapping",
                    "paternal haplotype mapping",
                    "phased mapping",
                    "minus strand signal of all reads",
                    "plus strand signal of all reads",
                    "signal of all reads",
                    "normalized signal of all reads",
                    "raw minus strand signal",
                    "raw plus strand signal",
                    "raw signal",
                    "raw normalized signal",
                    "read-depth normalized signal",
                    "control normalized signal",
                    "minus strand signal of unique reads",
                    "plus strand signal of unique reads",
                    "signal of unique reads",
                    "signal p-value",
                    "fold change over control",
                    "exon quantifications",
                    "gene quantifications",
                    "microRNA quantifications",
                    "transcript quantifications",
                    "library fraction",
                    "methylation state at CpG",
                    "methylation state at CHG",
                    "methylation state at CHH",
                    "enrichment",
                    "replication timing profile",
                    "relative replication signal",
                    "maternal variant calls",
                    "paternal variant calls",
                    "phased variant calls",
                    "variant calls",
                    "filtered SNPs",
                    "filtered indels",
                    "motif model",
                    "hotspots",
                    "long range chromatin interactions",
                    "chromatin interactions",
                    "topologically associated domains",
                    "nested topologically associated domains",
                    "genome compartments",
                    "open chromatin regions",
                    "filtered peaks",
                    "filtered regions",
                    "DHS peaks",
                    "peaks",
                    "replicated peaks",
                    "RNA-binding protein associated mRNAs",
                    "splice junctions",
                    "transcription start sites",
                    "predicted enhancers",
                    "candidate enhancers",
                    "candidate promoters",
                    "predicted forebrain enhancers",
                    "predicted heart enhancers",
                    "predicted whole brain enhancers",
                    "candidate regulatory elements",
                    "representative dnase hypersensitivity sites",
                    "sequence alignability",
                    "genome reference",
                    "transcriptome reference",
                    "transcriptome index",
                    "tRNA reference",
                    "miRNA reference",
                    "snRNA reference",
                    "rRNA reference",
                    "TSS reference",
                    "reference variants",
                    "genome index",
                    "female genome reference",
                    "female genome index",
                    "male genome reference",
                    "male genome index",
                    "spike-in sequence",
                    "optimal idr thresholded peaks",
                    "conservative idr thresholded peaks",
                    "pseudoreplicated idr thresholded peaks",
                    "stable peaks",
                    "enhancer validation",
                    "semi-automated genome annotation",
                    "blacklisted regions",
                    "mitochondria blacklisted regions"
                ]
            }
        },
        "qa_stats_generated": {
            "title": "QA statistics",
            "description": "The QA statistics generated by the analysis.",
            "type": "array",
            "uniqueItems": true,
            "items": {
                "title": "QA statistic",
                "description": "A QA statistic generated by the analysis.",
                "type": "string"
            }
        },
        "parents": {
            "title": "Parents",
            "description": "The precursor steps.",
            "uniqueItems": true,
            "type": "array",
            "items": {
                "description": "A precusor step.",
                "comment": "See analysis_step.json for available identifiers.",
                "type": "string",
                "linkTo": "AnalysisStep"
            }
        }
    },
    "changelog": "/profiles/changelogs/analysis_step.md"
}
