{ 
    "title": "Analysis step",
    "description": "Schema for submitting a computational analysis steps as a subobject of pipeline that transforms input files to output files.",
    "id": "/profiles/analysis_step.json",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "type": "object",
    "required": ["name", "analysis_step_types"],
    "identifyingProperties": ["uuid", "aliases"],
    "additionalProperties": false,
    "mixinProperties": [
        { "$ref": "mixins.json#/aliases" },
        { "$ref": "mixins.json#/schema_version" },
        { "$ref": "mixins.json#/uuid" },
        { "$ref": "mixins.json#/standard_status" },
        { "$ref": "mixins.json#/submitted"},
        { "$ref": "mixins.json#/documents" },
        { "$ref": "mixins.json#/notes"}
    ],
    "properties": {
        "schema_version": {
            "default": "1"
        },
        "name": {
            "title": "Name",
            "description": "Unique label of the analysis step using a naming system where the pipeline, software used, the purpose is described, e.g. rampage-grit-peak-calling-step",
            "type": "string",
            "pattern": "^[a-z0-9-]+-step$"
        },
        "analysis_step_types": {
            "title": "Analysis step types",
             "description": "The classification of the software",
             "type": "array",
             "uniqueItems": true,
             "items": {
                 "title": "Type",
                 "type": "string",
                 "enum": [
                     "alignment",
                     "barcodes mapping generation",
                     "chromatin loop identification",
                     "classification",
                     "depth normalization",
                     "enrichment",
                     "fastq concatenation",
                     "file format conversion",
                     "filtering",
                     "genome indexing",
                     "genome segmentation",
                     "IDR",
                     "interaction calling",
                     "long-read sequencing error correction",
                     "open chromatin region identification",
                     "partition concordance",
                     "personalized genome assembly",
                     "pseudoreplicated IDR",
                     "peak calling",
                     "pooling",
                     "QA calculation",
                     "quantification",
                     "ranking",
                     "read trimming",
                     "replicate concordance",
                     "signal generation",
                     "signal normalization",
                     "splice junction extraction",
                     "subsampling",
                     "topologically associated domain identification",
                     "transcript identification",
                     "transcriptome annotation",
                     "transcriptome assembly",
                     "unreplicated IDR",
                     "variant annotation",
                     "merging",
                     "cell calling"
                 ]
             }
        },
        "parameters": {
            "title": "parameters",
            "description": "The parameters used to run the specified software.",
            "type": "string"
        },
        "software_versions": {
            "title": "Software version",
            "description": "The software version used in the analysis.",
            "type": "array",
            "uniqueItems": true,
            "items": {
                "comment": "See software_version.json for a list of available identifiers.",
                "type": "string",
                "linkTo": "SoftwareVersion"
            }
        }
    },
    "facets": {
        "status": {
            "title": "Status"
        },
        "analysis_step_types": {
            "title": "Analysis step types"
        },
        "software_versions": {
            "title": "Software versions"
        }
    },
    "columns": {
        "name": {
            "title": "Analysis step name"
        },
        "status": {
            "title": "Status"
        },
        "analysis_step_types": {
            "title": "Analysis step types"
        },
        "software_versions": {
            "title": "Software versions"
        }
    },
    "changelog": "/profiles/changelogs/analysis_step.md"
}
