{ 
    "title": "Analysis step",
    "description": "Schema for submitting a computational analysis steps as a subobject of pipeline that transforms input files to output files.",
    "id": "/profiles/analysis_step.json",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "type": "object",
    "required": ["step_label", "title", "analysis_step_types", "input_file_types", "major_version"],
    "additionalProperties": false,
    "identifyingProperties": ["uuid", "aliases", "name-major_version"],
    "mixinProperties": [
        { "$ref": "mixins.json#/schema_version" },
        { "$ref": "mixins.json#/aliases" },
        { "$ref": "mixins.json#/uuid" },
        { "$ref": "mixins.json#/standard_status" },
        { "$ref": "mixins.json#/submitted"},
        { "$ref": "mixins.json#/documents" },
        { "$ref": "mixins.json#/notes"}
    ],
    "properties": {
        "schema_version": {
            "default": "8"
        },
        "step_label": {
            "title": "Step label",
            "description": "Unique label of the analysis step using a naming system where the pipeline, software used, the purpose is described, e.g. rampage-grit-peak-calling-step",
            "comment": "Unique for each parent analysis_step, do not include version number in the label, it will be calculated.",
            "type": "string",
            "pattern": "^[a-z0-9-]+-step$"
        },
        "title": {
            "title": "Title",
            "description": "The preferred viewable name of the analysis step, likely the same as the name.",
            "type": "string",
            "pattern": "^[a-zA-Z\\d_().,-]+(?:\\s[a-zA-Z\\d_().,-]+)*[step|Step]$"
        },
        "major_version": {
            "title": "Major version",
            "description": "The major version of the analysis step.",
            "comment": "Please increment as whole numbers starting from 1.",
            "type": "integer",
            "minimum": 1
        },
        "analysis_step_types": {
            "title": "Analysis step types",
             "description": "The classification of the software",
             "type": "array",
             "uniqueItems": true,
             "items": {
                 "title": "Type",
                 "type": "string",
                 "enum": [
                     "alignment",
                     "barcodes mapping generation",
                     "chromatin loop identification",
                     "classification",
                     "depth normalization",
                     "enrichment",
                     "fastq concatenation",
                     "file format conversion",
                     "filtering",
                     "genome indexing",
                     "genome segmentation",
                     "IDR",
                     "interaction calling",
                     "long-read sequencing error correction",
                     "open chromatin region identification",
                     "partition concordance",
                     "personalized genome assembly",
                     "pseudoreplicated IDR",
                     "peak calling",
                     "pooling",
                     "QA calculation",
                     "quantification",
                     "ranking",
                     "read trimming",
                     "replicate concordance",
                     "signal generation",
                     "signal normalization",
                     "splice junction extraction",
                     "subsampling",
                     "topologically associated domain identification",
                     "transcript identification",
                     "transcriptome annotation",
                     "transcriptome assembly",
                     "unreplicated IDR",
                     "variant annotation"
                 ]
             }
        },
        "input_file_types": {
            "title": "Input file types",
            "description": "The file types used as input for the analysis.",
            "type": "array",
            "uniqueItems": true,
            "items": {
                "title": "Input file type",
                "description": "A file type used as input for the analysis.",
                "type": "string",
                "enum": [
                    "alignments",
                    "bed",
                    "blacklisted regions",
                    "candidate Cis-Regulatory Elements",
                    "candidate enhancers",
                    "candidate promoters",
                    "chromatin interactions",
                    "conservative IDR thresholded peaks",
                    "control normalized signal",
                    "DHS peaks",
                    "differential expression quantifications",
                    "differential splicing quantifications",
                    "enhancer validation",
                    "enrichment",
                    "exon quantifications",
                    "female genome index",
                    "female genome reference",
                    "filtered indels",
                    "filtered peaks",
                    "filtered regions",
                    "filtered SNPs",
                    "fold change over control",
                    "gene alignments",
                    "gene quantifications",
                    "genome compartments",
                    "genome index",
                    "genome reference",
                    "hotspots",
                    "idat green channel",
                    "idat red channel",
                    "intensity values",
                    "IDR ranked peaks",
                    "IDR thresholded peaks",
                    "library fraction",
                    "long range chromatin interactions",
                    "male genome index",
                    "male genome reference",
                    "maternal haplotype mapping",
                    "maternal variant calls",
                    "methylation state at CHG",
                    "methylation state at CHH",
                    "methylation state at CpG",
                    "microRNA quantifications",
                    "minus strand signal of all reads",
                    "minus strand signal of unique reads",
                    "miRNA annotations",
                    "miRNA reference",
                    "mitochondria blacklisted regions",
                    "motif model",
                    "negative control regions",
                    "nested topologically associated domains",
                    "non-targeting gRNAs",
                    "normalized signal of all reads",
                    "open chromatin regions",
                    "optimal IDR thresholded peaks",
                    "paternal haplotype mapping",
                    "paternal variant calls",
                    "peaks",
                    "peaks and background as input for IDR",
                    "personalized genome assembly",
                    "phased mapping",
                    "phased variant calls",
                    "plus strand signal of all reads",
                    "plus strand signal of unique reads",
                    "positive control regions",
                    "predicted enhancers",
                    "predicted forebrain enhancers",
                    "predicted heart enhancers",
                    "predicted transcription start sites",
                    "predicted whole brain enhancers",
                    "pseudoreplicated IDR thresholded peaks",
                    "raw data",
                    "raw minus strand signal",
                    "raw normalized signal",
                    "raw plus strand signal",
                    "raw signal",
                    "read-depth normalized signal",
                    "reads",
                    "reference genes",
                    "reference variants",
                    "regulatory elements",
                    "relative replication signal",
                    "replicated peaks",
                    "replication timing profile",
                    "reporter code counts",
                    "representative dnase hypersensitivity sites",
                    "RNA-binding protein associated mRNAs",
                    "rRNA reference",
                    "safe-targeting gRNAs",
                    "semi-automated genome annotation",
                    "sequence adapters",
                    "sequence alignability",
                    "sequence barcodes",
                    "signal of all reads",
                    "signal of unique reads",
                    "signal p-value",
                    "snRNA reference",
                    "spike-in sequence",
                    "splice junctions",
                    "stable peaks",
                    "subreads",
                    "topologically associated domains",
                    "transcriptome annotations",
                    "transcript quantifications",
                    "transcription start sites",
                    "transcriptome alignments",
                    "transcriptome index",
                    "transcriptome reference",
                    "tRNA reference",
                    "TSS reference",
                    "unfiltered alignments",
                    "variant calls"
                ]
            }
        },
        "output_file_types": {
            "title": "Output file types",
            "description": "The file types generated as output for the analysis.",
            "type": "array",
            "uniqueItems": true,
            "items": {
                "title": "Output file type",
                "description": "A file type generated as output for the analysis.",
                "type": "string",
                "enum": [
                    "alignments",
                    "bigBed",
                    "blacklisted regions",
                    "candidate Cis-Regulatory Elements",
                    "candidate enhancers",
                    "candidate promoters",
                    "chromatin interactions",
                    "conservative IDR thresholded peaks",
                    "control normalized signal",
                    "DHS peaks",
                    "differential expression quantifications",
                    "differential splicing quantifications",
                    "enhancer validation",
                    "enrichment",
                    "exon quantifications",
                    "female genome index",
                    "female genome reference",
                    "filtered indels",
                    "filtered peaks",
                    "filtered regions",
                    "filtered SNPs",
                    "fold change over control",
                    "gene alignments",
                    "gene quantifications",
                    "genome compartments",
                    "genome index",
                    "genome reference",
                    "hotspots",
                    "idat green channel",
                    "idat red channel",
                    "intensity values",
                    "IDR ranked peaks",
                    "IDR thresholded peaks",
                    "library fraction",
                    "long range chromatin interactions",
                    "male genome index",
                    "male genome reference",
                    "maternal haplotype mapping",
                    "maternal variant calls",
                    "methylation state at CHG",
                    "methylation state at CHH",
                    "methylation state at CpG",
                    "microRNA quantifications",
                    "minus strand signal of all reads",
                    "minus strand signal of unique reads",
                    "miRNA annotations",
                    "miRNA reference",
                    "mitochondria blacklisted regions",
                    "motif model",
                    "negative control regions",
                    "nested topologically associated domains",
                    "non-targeting gRNAs",
                    "normalized signal of all reads",
                    "open chromatin regions",
                    "optimal IDR thresholded peaks",
                    "paternal haplotype mapping",
                    "paternal variant calls",
                    "peaks",
                    "peaks and background as input for IDR",
                    "personalized genome assembly",
                    "phased mapping",
                    "phased variant calls",
                    "plus strand signal of all reads",
                    "plus strand signal of unique reads",
                    "positive control regions",
                    "predicted enhancers",
                    "predicted forebrain enhancers",
                    "predicted heart enhancers",
                    "predicted transcription start sites",
                    "predicted whole brain enhancers",
                    "pseudoreplicated IDR thresholded peaks",
                    "raw minus strand signal",
                    "raw normalized signal",
                    "raw plus strand signal",
                    "raw signal",
                    "read-depth normalized signal",
                    "reads",
                    "reference genes",
                    "reference variants",
                    "regulatory elements",
                    "relative replication signal",
                    "replicated peaks",
                    "replication timing profile",
                    "reporter code counts",
                    "representative dnase hypersensitivity sites",
                    "RNA-binding protein associated mRNAs",
                    "rRNA reference",
                    "safe-targeting gRNAs",
                    "semi-automated genome annotation",
                    "sequence adapters",
                    "sequence alignability",
                    "sequence barcodes",
                    "signal of all reads",
                    "signal of unique reads",
                    "signal p-value",
                    "snRNA reference",
                    "spike-in sequence",
                    "splice junctions",
                    "stable peaks",
                    "subreads",
                    "topologically associated domains",
                    "transcriptome annotations",
                    "transcript quantifications",
                    "transcription start sites",
                    "transcriptome alignments",
                    "transcriptome index",
                    "transcriptome reference",
                    "tRNA reference",
                    "TSS reference",
                    "unfiltered alignments",
                    "variant calls"
                ]
            }
        },
        "qa_stats_generated": {
            "title": "QA statistics",
            "description": "The QA statistics generated by the analysis.",
            "type": "array",
            "uniqueItems": true,
            "items": {
                "title": "QA statistic",
                "description": "A QA statistic generated by the analysis.",
                "type": "string"
            }
        },
        "parents": {
            "title": "Parents",
            "description": "The precursor steps.",
            "uniqueItems": true,
            "type": "array",
            "items": {
                "description": "A precusor step.",
                "comment": "See analysis_step.json for available identifiers.",
                "type": "string",
                "linkTo": "AnalysisStep"
            }
        }
    },
    "facets": {
        "status": {
            "title": "Status"
        }
    },
    "changelog": "/profiles/changelogs/analysis_step.md"
}
