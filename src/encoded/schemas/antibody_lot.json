{
    "title": "Antibody lot",
    "description": "Schema for submitting an antibody lot (not including target or characterization information).",
    "id": "/profiles/antibody_lot.json",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "type": "object",
    "required": [ "award", "lab", "product_id", "source", "lot_id", "host_organism", "targets"],
    "calculatedProperties": ["lot_reviews"],
    "identifyingProperties": ["uuid","accession","aliases"],
    "additionalProperties": false,
    "mixinProperties": [
        { "$ref": "mixins.json#/schema_version" },
        { "$ref": "mixins.json#/uuid" },
        { "$ref": "mixins.json#/accession" },
        { "$ref": "mixins.json#/aliases" },
        { "$ref": "mixins.json#/attribution" },
        { "$ref": "mixins.json#/standard_status" },
        { "$ref": "mixins.json#/submitted" },
        { "$ref": "mixins.json#/source" },
        { "$ref": "mixins.json#/product_id" },
        { "$ref": "mixins.json#/notes" }

    ],
    "properties": {
        "schema_version": {
            "default": "4"
        },
        "accession": {
            "accessionType": "AB"
        },
        "lot_id": {
            "title": "Lot ID",
            "description": "The lot identifier provided by the originating lab or vendor.",
            "default": "unknown",
            "type": "string"
        },
        "lot_id_alias": {
            "title": "Lot ID aliases",
            "description": "The lot identifiers for this lot deemed to be exactly the same by the vendor.",
            "type": "array",
            "default": [],
            "items": {
                "title": "Lot ID Alias",
                "description": "The lot identifier for this lot deemed to be exactly the same by the vendor. ",
                "type": "string"
            }
        },
        "antigen_description": {
            "title": "Antigen description",
            "description": "The plain text description of the antigen used in raising the antibody (e.g. amino acid residue locations of the antigen).",
            "type": "string",
            "default": ""
        },
        "antigen_sequence": {
            "title": "Antigen sequence",
            "description": "The amino acid sequence of the antigen.",
            "type": "string"
        },
        "clonality": {
            "title": "Antibody clonality",
            "description": "The diversification of the immune cell lineage to make the antibody.",
            "type": "string",
            "enum": [
                "polyclonal",
                "monoclonal"
            ]
        },
        "dbxrefs": {
            "@type": "@id",
            "rdfs:subPropertyOf": "rdfs:seeAlso",
            "title": "External identifiers",
            "description": "Unique identifiers from external resources.",
            "type": "array",
            "default": [],
            "items": {
                "title": "External identifier",
                "description": "A unique identifier from external resource.",
                "type":  "string",
                "pattern": "^(UCSC-ENCODE-cv:\\S+)$"
            }
        },
        "host_organism": {
            "title": "Host",
            "description": "The organism the antibody was grown in.",
            "comment": "See organism.json for available identifiers.",
            "type": "string",
            "linkTo": "organism"
        },
        "isotype": {
            "title": "Isotype",
            "description": "The class of antibody ( e.g. IgA, IgD, IgE, IgG or IgM)",
            "type": "string",
            "enum": [
                "IgA1",
                "IgA2",
                "IgD",
                "IgG",
                "IgGκ",
                "IgG1",
                "IgG1κ",
                "IgG1λ",
                "IgG2",
                "IgG2κ",
                "IgG2λ",
                "IgG2a",
                "IgG2aκ",
                "IgG2aλ",
                "IgG2b",
                "IgG2bκ",
                "IgG2bλ",
                "IgG3",
                "IgG3κ",
                "IgG4",
                "IgA",
                "IgM",
                "IgMκ",
                "IgE",
                "serum"
            ]
        },
        "purifications": {
            "title": "Purification methods",
            "description": "The purification protocols used to isolate the antibody.",
            "type": "array",
            "default": [],
            "items": {
                "title": "Purification method",
                "description": "A purification protocol used to isolate the antibody.",
                "comment": "IMAC refers to Immobilized Metal Chelate Chromatography and IEC refers to Ion Exchange Chromatography",
                "type": "string",
                "enum": [
                    "Protein A/G",
                    "affinity",
                    "Protein A",
                    "Protein G",
                    "crude",
                    "other",
                    "IEC",
                    "IMAC",
                    "tissue culture supernatant",
                    "antiserum",
                    "IgG fraction"
                ]
            }
        },
        "targets": {
            "title": "Targets",
            "type": "array",
            "items": {
                "description": "The name of the gene whose expression or product is the intended goal of the antibody.",
                "comment": "See target.json for available identifiers.",
                "type": "string",
                "linkTo": "target"
            }
        },
        "url": {
            "title": "URL",
            "description": "An external resource with additional information about the antibody.",
            "type": "string",
            "format": "uri"
        }
   },
   "facets": {
        "lot_reviews.status": {
            "title": "Eligibility status",
            "type": "string"
        },
        "characterizations.target.organism.scientific_name": {
            "title": "Target Organism",
            "type": "string"
        },
        "source.title" : {
            "title": "Source",
            "type": "string"
        },
        "clonality": {
            "title": "Clonality",
            "type": "string"
        },
        "host_organism.name": {
            "title": "Host organism",
            "type": "string"
        },
        "characterizations.lab.title": {
            "title": "Lab",
            "type": "string"
        }
    },
    "columns": {
        "accession": {
            "title": "Accession",
            "type": "string"
        },
        "lot_reviews.biosample_term_name": {
            "title": "Ontology term",
            "type":  "string"
        },
        "lot_reviews.status": {
            "title": "Status",
            "type":  "string"
        },
        "lot_reviews.organisms.@id": {
            "title": "Organism ID",
            "type": "array"
        },
        "lot_reviews.organisms.scientific_name": {
            "title": "Organism scientific name",
            "type": "array"
        },
        "lot_reviews.targets.name": {
            "title": "Target name",
            "type":  "array"
        },
        "lot_reviews.targets.label": {
            "title": "Target label",
            "type":  "array"
        },
        "lot_reviews.targets.organism.@id": {
            "title": "Target organism ID",
            "type":  "array"
        },
        "lot_reviews.targets.organism.scientific_name": {
            "title": "Target organism scientific name",
            "type":  "array"
        },
        "source.title": {
            "title": "Source",
            "type": "string"
        },
        "product_id": {
            "title": "Product ID",
            "type": "string"
        },
        "lot_id": {
            "title": "Lot ID",
            "type": "string"
        },
        "host_organism.name": {
            "title": "Host organism",
            "type": "string"
        },
        "status": {
            "title": "Status",
            "type": "string"
        }
    },
    "calculated_props": {
        "lot_reviews": {
            "title": "Antibody lot reviews",
            "description": "Review outcome of an antibody lot in each characterized cell type submitted for review.",
            "type": "array",
            "default": [],
            "items": {
                "title": "Antibody lot review",
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "biosample_term_id": {
                        "title": "Ontology ID",
                        "description": "Ontology identifier describing biosample.",
                        "comment": "NTR is a new term request identifier provided by the DCC.",
                        "type": "string",
                        "pattern": "^(UBERON|EFO|CL|NTR|FBbt|WBbt):[0-9]{2,8}$"
                    },
                    "biosample_term_name": {
                        "title": "Ontology term",
                        "description": "Ontology term describing biosample.",
                        "type":  "string"
                    },
                    "organisms": {
                        "title": "Organism",
                        "type": "array",
                        "items": {
                            "comment": "See organism.json for available identifiers.",
                            "type": "string",
                            "linkTo": "organism"
                        }
                    },
                    "targets": {
                        "title": "Targets",
                        "type": "array",
                        "items": {
                            "description": "The name of the gene whose expression or product is the intended goal of the antibody.",
                            "comment": "See target.json for available identifiers.",
                            "type": "string",
                            "linkTo": "target"
                        }
                    },
                    "status": {
                        "title": "Status",
                        "description": "The current state of the antibody characterizations.",
                        "comment": "Do not submit, the value is assigned by server. The status is updated by the DCC.",
                        "type": "string",
                        "default": "awaiting lab characterization",
                        "enum" : [
                            "awaiting lab characterization",
                            "pending dcc review",
                            "eligible for new data",
                            "not eligible for new data",
                            "not pursued"
                        ]
                    }
                }
            }
        }
    },
    "boost_values": {
        "uuid": 1.0,
        "accession": 1.0,
        "alternate_accessions": 1.0,
        "lot_id": 1.0,
        "lot_id_alias": 1.0,
        "clonality": 1.0,
        "isotype": 1.0,
        "purifications": 1.0,
        "product_id": 1.0,
        "aliases": 1.0,
        "dbxrefs": 1.0,
        "source.title": 1.0,
        "host_organism.name": 1.0,
        "host_organism.scientific_name": 1.0,
        "host_organism.taxon_id": 1.0,
        "characterizations.primary_characterization_method": 1.0,
        "characterizations.secondary_characterization_method": 1.0,
        "characterizations.award.title": 1.0,
        "characterizations.award.project": 1.0,
        "characterizations.submitted_by.email": 1.0,
        "characterizations.submitted_by.first_name": 1.0,
        "characterizations.submitted_by.last_name": 1.0,
        "characterizations.lab.institute_name": 1.0,
        "characterizations.lab.institute_label": 1.0,
        "characterizations.lab.title": 1.0,
        "characterizations.target.gene_name": 1.0,
        "characterizations.target.label": 1.0,
        "characterizations.target.dbxref": 1.0,
        "characterizations.target.aliases": 1.0,
        "characterizations.target.organism.name": 1.0,
        "characterizations.target.organism.scientific_name": 1.0,
        "characterizations.target.organism.taxon_id": 1.0
    }
}
