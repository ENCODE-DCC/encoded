{
    "title": "File",
    "description": "Schema for submitting metadata for a file.",
    "comment": "This object type is abstract. These properties are inherited by other object types",
    "id": "/profiles/file.json",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "type": "object",
    "mixinProperties": [],
    "properties": {
        "external_accession": {
            "title": "External accession",
            "description": "For files that were not accessioned at our site but have an accession elsewhere.",
            "comment": "Do not submit. Only admins are allowed to set or update this value.",
            "type": "string",
            "permission": "import_items",
            "uniqueKey": "accession"
        },
        "file_format": {
            "title": "File format",
            "description": "The format structure of the file.",
            "type": "string"
        },
        "submitted_file_name": {
            "title": "Original file name",
            "description": "The local file name used at time of submission.",
            "comment": "Although this is not required. It is highly recommended.",
            "type": "string"
        },
        "s3_uri": {
            "title": "S3 URI",
            "description": "The S3 URI of public file object.",
            "type": "string"
        },
        "external_uri": {
            "title": "External URI",
            "description": "The URI of public file object that is not hosted at the Lattice AWS S3.",
            "type": "string"
        },
        "md5sum": {
            "title": "MD5sum",
            "description": "The md5sum of the file being transferred.",
            "comment": "Required for files with no_file_available = false . Warning: This value can vary for files of same content gzipped at different times",
            "type": "string",
            "format": "hex",
            "maxLength": 32,
            "pattern": "[a-f\\d]{32}|[A-F\\d]{32}"
        },
        "content_md5sum": {
            "title": "Content MD5sum",
            "description": "The MD5sum of the uncompressed file.",
            "comment": "Do not submit. This is only relavant for gzipped files. This value is calculated and posted by checkfiles script upon submission.",
            "type": "string",
            "permission": "import_items",
            "format": "hex",
            "maxLength": 32,
            "pattern": "[a-f\\d]{32}|[A-F\\d]{32}"
        },
        "file_size": {
            "title": "File size",
            "description": "File size specified in bytes.",
            "comment": "Required.",
            "type": "integer",
            "minimum": 0
        },
        "output_types": {
            "title": "Output types",
            "description": "A description of the file's purpose or contents.",
            "type": "array"
        },
        "derived_from": {
            "title": "Derived from",
            "description": "The files participating as inputs into software to produce this output file.",
            "type": "array",
            "uniqueItems": true
        },
        "derivation_process": {
            "title": "Derivation process",
            "description": "The method(s) by which this object was derived.",
            "type": "array",
            "items": {
                "title": "Derivation process",
                "description": "A method by which this object was derived.",
                "type":  "string",
                "enum": [
                     "alignment",
                     "barcodes mapping generation",
                     "chromatin loop identification",
                     "classification",
                     "depth normalization",
                     "enrichment",
                     "fastq concatenation",
                     "file format conversion",
                     "filtering",
                     "genome indexing",
                     "genome segmentation",
                     "IDR",
                     "interaction calling",
                     "long-read sequencing error correction",
                     "open chromatin region identification",
                     "partition concordance",
                     "personalized genome assembly",
                     "pseudoreplicated IDR",
                     "peak calling",
                     "pooling",
                     "QA calculation",
                     "quantification",
                     "ranking",
                     "read trimming",
                     "replicate concordance",
                     "signal generation",
                     "signal normalization",
                     "splice junction extraction",
                     "subsampling",
                     "topologically associated domain identification",
                     "transcript identification",
                     "transcriptome annotation",
                     "transcriptome assembly",
                     "unreplicated IDR",
                     "variant annotation",
                     "merging",
                     "cell calling"
                 ]
            }
        }
    }
}
