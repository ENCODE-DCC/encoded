{
    "title": "Data file",
    "description": "Schema for submitting metadata for a data file.",
    "id": "/profiles/file.json",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "type": "object",
    "required": ["dataset", "file_format", "md5sum", "output_type"],
    "identifyingProperties": ["uuid","accession", "aliases"],
    "calculatedProps": ["href"],
    "additionalProperties": false,
    "mixinProperties": [
        { "$ref": "mixins.json#/schema_version" },
        { "$ref": "mixins.json#/uuid" },
        { "$ref": "mixins.json#/accession" },
        { "$ref": "mixins.json#/submitted" },
        { "$ref": "mixins.json#/aliases" },        
        { "$ref": "mixins.json#/notes" }
    ],
    "facets": {
        "status": {
            "title": "File status",
            "type": "string"
        },
        "output_type": {
            "title": "Output type",
            "type": "string"
        },
        "file_format": {
            "title": "File format",
            "type": "string"
        },
        "lab.title": {
            "title": "Lab",
            "type": "string"
        }
    },
    "properties": {
        "schema_version": {
            "default": "3"
        },
        "accession": {
            "accessionType": "FF"
        },
        "file_format": {
            "title": "File format",
            "comment": "Not all of the types are valid for new submissions, but are present for historical purposes.",
            "type": "string",
            "enum": [
                "bam",
                "bed",
                "bedLogR",
                "bed_bedLogR",
                "bedMethyl",
                "bed_bedMethyl",
                "bigBed",
                "bigWig",
                "broadPeak",
                "bed_broadPeak",
                "fasta",
                "fastq",
                "gtf",
                "idat",
                "narrowPeak",
                "bed_narrowPeak",
                "rcc",
                "tar",
                "tsv",
                "2bit",
                "csfasta",
                "csqual",
                "bedRnaElements",
                "CEL"
            ]
        },
        "md5sum": {
            "title": "MD5sum",
            "type": "string",
            "format": "hex"
        },
        "file_size": {
            "title": "File size",
            "comment": "File size is specified in bytes",
            "type": "integer"
        },
        "platform": {
            "title": "Platform",
            "description": "The measurement device used to collect data.",
            "comment": "See platform.json for available identifiers.",
            "type": "string",
            "linkTo": "platform"
        },
        "flowcell_details": {
            "title": "Flowcells",
            "description": "For high-throughput sequencing, the flowcells used for the sequencing of the replicate.",
            "type": "array",
            "default": [],
            "items": {
                "title": "Flowcell details",
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "machine": {
                        "title": "Machine Name",
                        "description": "The lab specific name of the machine used.",
                        "type": "string"
                    },
                    "flowcell": {
                        "title": "Flowcell ID",
                        "type": "string"
                    },
                    "lane": {
                        "title": "Lane",
                        "type": "string"
                    },
                    "barcode": {
                        "title": "Barcode",
                        "type": "string"
                    }
                }
            }
        },
        "output_type": {
            "title": "Output type",
            "description": "A description of the file's purpose or contents.",
            "type": "string",
            "enum": [
                "Alignability",
                "alignments",
                "Base_Overlap_Signal",
                "clusters",
                "CNV",
                "contigs",
                "enhancers",
                "enhancers_forebrain",
                "enhancers_heart",
                "enhancers_wholebrain",
                "enrichment",
                "Excludable",
                "ExonsDeNovo",
                "ExonsEnsV65IAcuff",
                "ExonsGencV10",
                "ExonsGencV3c",
                "ExonsGencV7",
                "FiltTransfrags",
                "GeneDeNovo",
                "GeneEnsV65IAcuff",
                "GeneGencV10",
                "GeneGencV3c",
                "GeneGencV7",
                "idat green file",
                "idat red file",
                "HMM",
                "hotspots",
                "interactions",
                "Junctions",
                "library_fraction",
                "Matrix",
                "minus signal",
                "mPepMapGcFt",
                "mPepMapGcUnFt",
                "multi-read minus signal",
                "multi-read plus signal",
                "multi-read signal",
                "PctSignal",
                "peaks",
                "pepMapGcFt",
                "pepMapGcUnFt",
                "plus signal",
                "Primer",
                "PrimerPeaks",
                "raw data",
                "raw minus signal",
                "raw plus signal",
                "raw signal",
                "RbpAssocRna",
                "reads",
                "rejected reads",
                "signal",
                "sites",
                "spike-ins",
                "splice junctions",
                "SumSignal",
                "TranscriptDeNovo",
                "TranscriptEnsV65IAcuff",
                "TranscriptGencV10",
                "TranscriptGencV3c",
                "TranscriptGencV7",
                "Transfrags",
                "TssGencV3c",
                "TssGencV7",
                "TssHmm",
                "UniformlyProcessedPeakCalls",
                "unique minus signal",
                "Uniqueness",
                "unique plus signal",
                "unique signal",
                "Validation",
                "Valleys",
                "WaveSignal"
            ]
        },
        "paired_end": {
            "title": "Paired End Identifier",
            "description": "Which pair the file belongs to (if paired end library)",
            "type": "string",
            "enum": [
                "1",
                "2"
            ]
        },
        "derived_from": {
            "title": "Derived from",
            "description": "The files participating as inputs into software to produce this output file.",
            "type": "array",
            "items": {
                    "comment": "See file.json for a list of available identifiers.",
                    "type": "string",
                    "linkTo": "file"
                    }
        },
        "controlled_by": {
            "title": "Controlled by",
            "description": "The files that control this file. ",
            "type": "array",
            "items": {
                    "comment": "See file.json for a list of available identifiers.",
                    "type": "string",
                    "linkTo": "file"
            }
        },
        "supercedes": {
            "title": "Supercedes" ,
            "description": "The files that this file replaces.",
            "type": "array",
            "items": {
                    "comment": "See file.json for a list of available identifiers.",
                    "type": "string",
                    "linkTo": "file"
            }
        },
        "paired_with": {
            "title": "File pairing",
            "description": "The file that corresponds with this file.",
            "comment": "See file.json for a list of available identifiers.",
            "type": "string",
            "linkTo": "file"
        },
        "dataset": {
            "title": "Dataset",
            "description": "The experiment or dataset the file belongs to.",
            "comment": "For experiments, see experiment.json for available identifiers. For datasets, see dataset.json for available identifiers.",
            "type": "string",
            "linkTo": ["experiment", "dataset"]
        },
        "replicate": {
            "title": "Replicate",
            "description": "The experimental replicate designation for the file.",
            "comment": "See replicate.json for available identifiers.",
            "type": "string",
            "linkTo": "replicate"
        },
        "assembly": {
            "title": "Mapping assembly",
            "description": "UCSC genome assembly that files were mapped to.",
            "comment": "Applies for mapped files (e.g. BAM, BED and BigWig).",
            "type": "string",
            "enum": ["mm9", "hg19", "mm10", "ce10", "dm3", "dm6"]
        },
        "submitted_file_name": {
            "title": "Original file name",
            "description": "The local file name used at time of submission.",
            "type": "string"
        },
        "download_path": {
            "title": "Download URL",
            "comment": "The file resource locater.",
            "type": "string"
        },
        "status": {
            "title": "Status",
            "type": "string",
            "default": "uploading",
            "enum" : [
                "uploading",
                "in progress",
                "deleted",
                "replaced",
                "revoked",
                "released"
                ]
        }
    },
    "columns": {
        "accession": {
            "title": "Accession",
            "type": "string"
        },
        "dataset": {
            "title": "Dataset",
            "type": "string"
        },
        "file_format": {
            "title": "File Format",
            "type": "string"
        },
        "md5sum": {
            "title": "MD5 Sum",
            "type": "string"
        },
        "output_type": {
            "title": "Output Type",
            "type": "string"
        }
    },
    "file_format_file_extension": {
        "2bit": ".2bit",
        "CEL": ".cel.gz",
        "bam": ".bam",
        "bedLogR": ".bedLogR.bigBed  ",
        "bedMethyl": ".bedMethyl.bigBed",
        "bedRnaElements": ".bedRnaElements.bigBed",
        "bed": ".bed.gz",
        "bed_bedLogR": ".bedLogR.gz",
        "bed_bedMethyl": ".bedMethyl.gz",
        "bed_bedRnaElements": ".bedRnaElements.gz",
        "bed_broadPeak": ".broadPeak.gz",
        "bed_narrowPeak": ".narrowPeak.gz",
        "bigBed": ".bigBed",
        "bigWig": ".bigWig",
        "broadPeak": ".broadPeak.bigbed",
        "csfasta": ".csfasta.gz",
        "csqual": ".csqual.gz",
        "fasta": ".fasta.gz",
        "fastq": ".fastq.gz",
        "gff": ".gff.gz",
        "gtf": ".gtf.gz",
        "idat": ".idat",
        "narrowPeak": ".narrowPeak.bigBed",
        "rcc": ".rcc",
        "tar": ".tar.gz",
        "tsv": ".tsv"
    }
}
